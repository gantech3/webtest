<!DOCTYPE html>
<html>
 <head>
  <title>HTML</title>
 </head>
 <body>
   <h1>HTML</h1>
   <p>GAS JSON load Test A11.</p>
 <script>
	document.write("<p>Nowloading GAS data</p>");
const url = 'https://script.google.com/macros/s/AKfycbzylyRc4N3mqB9uX5gNpEjIsHJ_bE_Ccikpq-ZpOm1mP4AVIkvU6lfipW_wNwd1nObA/exec';
const opt = {
  method: 'POST',
mode: 'no-cors',
	headers: {
  'Content-Type': 'application/x-www-form-urlencoded'
	},
  body: 'id=aoki&mode=read&value=1'
}

fetch(url, opt)
    .then((response) => {
        response.text().then((text) => {
            alert(text);
        });
    })
    .catch((error) => {
        alert(error.message);
    });
/*	 
fetch(url, opt)
  .then(res => res.text())
  .then(text => console.log("text="+text+"!"))
  .catch(err => console.log(err))
*/	
//fetch(url, opt)
//  .then(res => res.text())
//	.then(text => console.log("text="+text+"!") )
///	.then(text => document.write("<p>getJsonString="+text+"...ok?</p>") )
//  .catch(err => console.log(err))

//fetch(url, opt)
//  .then((res) => res.json())
//  .then((data) => {
//    const dataStr = JSON.stringify(data)
//      console.log(data)
//      localStorage.setItem('localData', dataStr)
//  	document.write("<p>getJsonString="+dataStr+"...ok?</p>")
//  })
	 
	/* 
	document.write("<p>Nowloading GAS data</p>");
	const url = 'https://script.google.com/macros/s/AKfycbxVRb5kOZWxAy5eJfKYqmYwTk3ciumUAQ9DKPz5RptvTbS4ULJeIsKvBOpkmpRBVTg/exec';
	const options = {
  		method: 'POST',
         	mode: 'no-cors',
         	'Content-Type' : 'application/x-www-form-urlencoded',
//  		headers: {
//    			'Content-Type': 'application/json'
//  		},
  		body: JSON.stringify({
   			"id": "aoki",
   			"mode": "read",
   			"value": "1"
  		})
	}
*/
	/*
fetch(url, options)
  .then((res) => res.json())
  .then((data) => {
    const dataStr = JSON.stringify(data)
      console.log(data)
      localStorage.setItem('localData', dataStr)
  	document.write("<p>getJsonString="+dataStr+"...ok?</p>")
  }) */
	 /*
fetch(url, options)
  .then(response => {
//    if (!response.ok) {
//      throw new Error('Network response was not ok');
//    }
    return response.text(); // ここではtext()を使用していますが、実際にはGASのレスポンスに合わせて適宜変更してください。
  })
  .then(data => {
  	document.write("<p>getJsonString="+data+"...ok?</p>")
    console.log(data); // 成功した場合の処理
  })
  .catch(error => {
    console.error('There was a problem with your fetch operation:', error);
  });	
  */
</script>

 </body>
</html>
